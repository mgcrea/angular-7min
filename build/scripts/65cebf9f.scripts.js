/**
 * beelink-mobile
 * @version v1.0.0 - 2013-05-26
 * @link 
 * @author 
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.$debug=!0;var userAgent=navigator.userAgent.toLowerCase();setTimeout(function(){angular.bootstrap(document,["$app"])}),angular.module("$app",["ajoslin.mobile-navigate","cordova.analytics"]).service("console",["$window",function(e){return angular.$debug?e.console:{log:function(){},warn:function(){},error:function(){}}}]).constant("workouts",[{id:"jumping-jacks",name:"Jumping Jacks"},{id:"wall-sit",name:"Wall Sit"},{id:"push-up",name:"Push Up"},{id:"abdominal-crunch",name:"Abdominal Crunch"},{id:"step-up-onto-chair",name:"Step-Up onto Chair"},{id:"squat",name:"Squat"},{id:"triceps-dip-on-chair",name:"Triceps Dip on Chair"},{id:"plank",name:"Plank"},{id:"high-knees-running-in-place",name:"High Knees Running in Place"},{id:"lunge",name:"Lunge"},{id:"push-up-and-rotation",name:"Push-up and Rotation"},{id:"side-plank",name:"Side Plank"}]).value("workout",{duration:420,rest:{name:"Rest",time:.25},list:["jumping-jacks","wall-sit","push-up","abdominal-crunch","step-up-onto-chair","squat","triceps-dip-on-chair","plank","high-knees-running-in-place","lunge","push-up-and-rotation","side-plank"]}).config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/step/:step",{templateUrl:"views/step.html",controller:"StepsCtrl"}).when("/rest/:step",{templateUrl:"views/rest.html",controller:"RestCtrl"}).when("/done",{templateUrl:"views/done.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]).run(["console","$rootScope","$location","$navigate","$route","$analytics",function(e,t,n,r,o,i){t.$location=n,t.$navigate=r,i.init("UA-1813303-9",10),i.trackEvent("application","start"),setTimeout(function(){navigator.splashscreen&&navigator.splashscreen.hide()},150)}]),window.addEventListener("load",function(){new FastClick(document.body)},!1),angular.module("$app").constant("numbers",{ones:["","one","two","three","four","five","six","seven","eight","nine"],tens:["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],teens:["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"]}).filter("firstWord",function(){return function(e){return e.split(" ").shift()}}).filter("followingWords",function(){return function(e){return e.split(" ").slice(1).join(" ")}}).filter("numberAsText",["numbers",function(e){return function(t){return t?10>t?e.ones[t]:t>=10&&20>t?e.teens[t-10]:e.tens[Math.floor(t/10)]+" "+e.ones[t%10]:"zero"}}]),angular.module("$app").service("audioFiles",["$window",function(e){var t=e.Media||e.Audio,n={tick:{src:"./sounds/tick.wav",volume:.35},rest:{src:"./sounds/tick-rest.wav",volume:.05},start:{src:"./sounds/newmail.wav",volume:.75},stop:{src:"./sounds/mailsent.wav",volume:.75},skip:{src:"./sounds/mailerror.wav",volume:1}};angular.forEach(n,function(e){e.audio=new t(e.src),e.volume&&(e.audio.volume=e.volume)}),this.play=function(e){return n[e]?(n[e].audio.play(),void 0):!1}}]).factory("$countdown",function(){function e(e){var t={interval:1e3},n=function(e){return this.options=angular.extend({},t,e),this.init(e)};return n.prototype={constructor:n,init:function(){var e=this,t=this.options,n=this.options.scope;return n[t.prop]=parseInt(t.duration||n[t.prop],10),this.start(),n.$on("$destroy",function(){e.stop()}),this},toggle:function(){var e=this.options,t=this.options.scope;t[e.prop]&&(this.interval?this.stop():this.start())},start:function(){var e=this,t=this.options,n=this.options.scope;this.interval=setInterval(function(){n.$apply(function(){n[t.prop]--,n[t.prop]?angular.isFunction(t.tick)&&t.tick.call(null):(e.stop(),angular.isFunction(t.callback)&&t.callback.call(null))})},t.interval)},stop:function(){clearInterval(this.interval),this.interval=void 0}},new n(e)}return e}),angular.module("cordova.analytics",[]).service("$analytics",["$window","$q",function(e,t){var n=function(n,r){var o=t.defer();return e.cordova&&e.cordova.exec?(e.cordova.exec(function(e){o.resolve(e)},function(e){o.reject(e)},"GAPlugin",n,r),o.promise):void 0};this.init=function(e,t){return n("initGA",[e,t||10])},this.trackEvent=function(e,t,r,o){return n("trackEvent",[e,t,r||"",o||-1])},this.trackPage=function(e){return n("trackPage",[e])},this.setVariable=function(e,t){return n("setVariable",[e,t])},this.destroy=function(){return n("exitGA",[])}}]),angular.module("$app").controller("AppCtrl",["$scope","$location","$navigate","$routeParams","$countdown","audioFiles","workouts","workout",function(e,t,n){e.exit=function(){n.go("/","cubeToLeft")}}]).controller("MainCtrl",["$scope","$location","$navigate","$routeParams","$countdown","$analytics","audioFiles","workouts","workout",function(e,t,n,r,o,i,a,c,u){e.timer=3,e.next="/step/1",e.countdown=!1,e.workout=u,e.startText=function(){return e.countdown?e.timer:"Start"},e.start=function(){a.play("tick"),e.countdown=o({scope:e,prop:"timer",duration:3,tick:function(){a.play("tick")},callback:function(){a.play("start"),n.go(e.next,"glueTopFromBottom")}}),i.trackEvent("workout","start")},e.restart=function(){a.play("skip"),n.go(e.next,"glueTopFromBottom"),i.trackEvent("workout","restart")},e.minus=function(){240>=u.duration||(u.duration-=60)},e.plus=function(){u.duration>=1200||(u.duration+=60)}}]),angular.module("$app").controller("StepsCtrl",["$scope","$location","$navigate","$routeParams","$countdown","$analytics","audioFiles","workouts","workout",function(e,t,n,r,o,i,a,c,u){e.step=1*r.step,e.total=u.list.length,e.next=e.step<e.total?"/rest/"+e.step:"/done";var s=u.list[e.step-1];e.workout=c.filter(function(e){return e.id===s}).pop(),e.duration=parseInt(u.duration/e.total*(1-u.rest.time),10),e.timer=e.duration;var l=o({scope:e,prop:"timer",duration:e.duration,tick:function(){a.play("tick")},callback:function(){a.play("stop"),e.skip()}});e.paused=!1,e.pauseText=function(){return e.paused?"Play":"Pause"},e.pause=function(){a.play("skip"),l.toggle(),e.paused=!e.paused},e.skipText=function(){return e.paused?"Restart":"Skip"},e.skip=function(){a.play("skip"),e.paused?(e.timer=e.duration,e.pause()):n.go(e.next,"glueTopFromBottom"),i.trackEvent("workout","skip")}}]),angular.module("$app").controller("RestCtrl",["$scope","$location","$navigate","$routeParams","$countdown","audioFiles","workouts","workout",function(e,t,n,r,o,i,a,c){e.step=1*r.step,e.total=c.list.length,e.next="/step/"+(e.step+1),e.rest=c.rest;var u=c.list[e.step];e.workout=a.filter(function(e){return e.id===u}).pop(),e.duration=parseInt(c.duration/c.list.length*c.rest.time,10),e.timer=e.duration;var s=o({scope:e,prop:"timer",duration:e.duration,tick:function(){i.play("rest")},callback:function(){i.play("start"),e.skip()}});e.paused=!1,e.pauseText=function(){return e.paused?"Play":"Pause"},e.pause=function(){i.play("skip"),s.toggle(),e.paused=!e.paused},e.skip=function(){i.play("skip"),n.go(e.next,"glueBottomFromTop")}}]);